!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@abp/ng.core"),require("@abp/ng.theme.shared"),require("@angular/core"),require("@ng-bootstrap/ng-bootstrap"),require("@ngx-validate/core"),require("@ngxs/store"),require("primeng/toast"),require("@ngxs/router-plugin"),require("angular-oauth2-oidc"),require("just-compare"),require("rxjs"),require("rxjs/operators"),require("snq")):"function"==typeof define&&define.amd?define("@abp/ng.theme.basic",["exports","@abp/ng.core","@abp/ng.theme.shared","@angular/core","@ng-bootstrap/ng-bootstrap","@ngx-validate/core","@ngxs/store","primeng/toast","@ngxs/router-plugin","angular-oauth2-oidc","just-compare","rxjs","rxjs/operators","snq"],e):e(((n=n||self).abp=n.abp||{},n.abp.ng=n.abp.ng||{},n.abp.ng.theme=n.abp.ng.theme||{},n.abp.ng.theme.basic={}),n.ng_core,n.ng_theme_shared,n.ng.core,n.ngBootstrap,n.core$1,n.store,n.toast,n.routerPlugin,n.angularOauth2Oidc,n.compare,n.rxjs,n.rxjs.operators,n.snq)}(this,(function(n,e,r,t,a,o,i,l,s,p,c,d,u,g){"use strict";c=c&&c.hasOwnProperty("default")?c.default:c,g=g&&g.hasOwnProperty("default")?g.default:g;
/*! *****************************************************************************
var m=function(n,e){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r])})(n,e)};var f=function(){return(f=Object.assign||function(n){for(var e,r=1,t=arguments.length;r<t;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}).apply(this,arguments)};function h(n,e,r,t){var a,o=arguments.length,i=o<3?e:null===t?t=Object.getOwnPropertyDescriptor(e,r):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(n,e,r,t);else for(var l=n.length-1;l>=0;l--)(a=n[l])&&(i=(o<3?a(i):o>3?a(e,r,i):a(e,r))||i);return o>3&&i&&Object.defineProperty(e,r,i),i}function b(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)}function y(n,e){var r="function"==typeof Symbol&&n[Symbol.iterator];if(!r)return n;var t,a,o=r.call(n),i=[];try{for(;(void 0===e||e-- >0)&&!(t=o.next()).done;)i.push(t.value)}catch(n){a={error:n}}finally{try{t&&!t.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return i}function v(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(y(arguments[e]));return n}var w=function(){function n(){}return n.type="account",n.decorators=[{type:t.Component,args:[{selector:"abp-layout-account",template:"\n    <router-outlet></router-outlet>\n    <abp-confirmation></abp-confirmation>\n    <abp-toast></abp-toast>\n  "}]}],n}();var C=function(){function n(n){this.payload=n}return n.type="[Layout] Add Navigation Element",n}();var S=function(){function n(n){this.name=n}return n.type="[Layout] Remove Navigation ElementByName",n}();var x=function(){function n(){}return n.getNavigationElements=function(n){return n.navigationElements},n.prototype.layoutAddAction=function(n,e){var r=n.getState,t=n.patchState,a=e.payload,o=void 0===a?[]:a,i=r().navigationElements;if(Array.isArray(o)||(o=[o]),i.length&&(o=g((function(){return o.filter((function(n){var e=n.name;return i.findIndex((function(n){return n.name===e}))<0}))}),[])),o.length)return t({navigationElements:i=v(i,o).map((function(n){return f({},n,{order:n.order||99})})).sort((function(n,e){return n.order-e.order}))})},n.prototype.layoutRemoveAction=function(n,e){var r=n.getState,t=n.patchState,a=e.name,o=r().navigationElements,i=o.findIndex((function(n){return n.name===a}));return i>-1&&(o=o.splice(i,1)),t({navigationElements:o})},h([i.Action(C),b("design:type",Function),b("design:paramtypes",[Object,C]),b("design:returntype",void 0)],n.prototype,"layoutAddAction",null),h([i.Action(S),b("design:type",Function),b("design:paramtypes",[Object,S]),b("design:returntype",void 0)],n.prototype,"layoutRemoveAction",null),h([i.Selector(),b("design:type",Function),b("design:paramtypes",[Object]),b("design:returntype",Array)],n,"getNavigationElements",null),n=h([i.State({name:"LayoutState",defaults:{navigationElements:[]}})],n)}(),O=function(){function n(n,e,r){this.store=n,this.oauthService=e,this.renderer=r,this.isCollapsed=!0,this.rightPartElements=[],this.trackByFn=function(n,e){return e.name},this.trackElementByFn=function(n,e){return e}}return Object.defineProperty(n.prototype,"appInfo",{get:function(){return this.store.selectSnapshot(e.ConfigState.getApplicationInfo)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visibleRoutes$",{get:function(){return this.routes$.pipe(u.map((function(n){return function n(e){return e.reduce((function(e,r){return r.invisible?e:(r.children&&r.children.length&&(r.children=n(r.children)),v(e,[r]))}),[])}(n)})))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"defaultLanguage$",{get:function(){var n=this;return this.languages$.pipe(u.map((function(e){return g((function(){return e.find((function(e){return e.cultureName===n.selectedLangCulture})).displayName}))}),""))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dropdownLanguages$",{get:function(){var n=this;return this.languages$.pipe(u.map((function(e){return g((function(){return e.filter((function(e){return e.cultureName!==n.selectedLangCulture}))}))}),[]))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectedLangCulture",{get:function(){return this.store.selectSnapshot(e.SessionState.getLanguage)},enumerable:!0,configurable:!0}),n.prototype.checkWindowWidth=function(){var n=this;setTimeout((function(){window.innerWidth<768?(n.isDropdownChildDynamic=!1,!1===n.smallScreen&&(n.isCollapsed=!1,setTimeout((function(){n.isCollapsed=!0}),100)),n.smallScreen=!0):(n.isDropdownChildDynamic=!0,n.smallScreen=!1)}),0)},n.prototype.ngAfterViewInit=function(){var n=this;this.store.selectSnapshot(x.getNavigationElements).map((function(n){return n.name})).indexOf("LanguageRef")<0&&this.store.dispatch(new C([{element:this.languageRef,order:4,name:"LanguageRef"},{element:this.currentUserRef,order:5,name:"CurrentUserRef"}])),this.navElements$.pipe(u.map((function(n){return n.map((function(n){return n.element}))})),u.filter((function(e){return!c(e,n.rightPartElements)})),e.takeUntilDestroy(this)).subscribe((function(e){setTimeout((function(){return n.rightPartElements=e}),0)})),this.checkWindowWidth(),d.fromEvent(window,"resize").pipe(e.takeUntilDestroy(this),u.debounceTime(150)).subscribe((function(){n.checkWindowWidth()}))},n.prototype.ngOnDestroy=function(){},n.prototype.onChangeLang=function(n){this.store.dispatch(new e.SetLanguage(n))},n.prototype.logout=function(){this.oauthService.logOut(),this.store.dispatch(new s.Navigate(["/"],null,{state:{redirectUrl:this.store.selectSnapshot(s.RouterState).state.url}})),this.store.dispatch(new e.GetAppConfiguration)},n.prototype.openChange=function(n,e){var r=this;n||(Object.keys(e.style).filter((function(n){return Number.isInteger(+n)})).forEach((function(n){r.renderer.removeStyle(e,e.style[n])})),this.renderer.removeStyle(e,"left"))},n.type="application",n.decorators=[{type:t.Component,args:[{selector:"abp-layout-application",template:'<nav\r\n  class="navbar navbar-expand-md navbar-dark bg-dark shadow-sm flex-column flex-md-row mb-4"\r\n  id="main-navbar"\r\n  style="min-height: 4rem;"\r\n>\r\n  <div class="container ">\r\n    <a class="navbar-brand" routerLink="/">\r\n      <img *ngIf="appInfo.logoUrl; else appName" [src]="appInfo.logoUrl" [alt]="appInfo.name" />\r\n    </a>\r\n    <button\r\n      class="navbar-toggler"\r\n      type="button"\r\n      [attr.aria-expanded]="!isCollapsed"\r\n      (click)="isCollapsed = !isCollapsed"\r\n    >\r\n      <span class="navbar-toggler-icon"></span>\r\n    </button>\r\n    <div class="navbar-collapse" [class.overflow-hidden]="smallScreen" id="main-navbar-collapse">\r\n      <ng-container *ngTemplateOutlet="!smallScreen ? navigations : null"></ng-container>\r\n\r\n      <div *ngIf="smallScreen" [@collapseWithMargin]="isCollapsed ? \'collapsed\' : \'expanded\'">\r\n        <ng-container *ngTemplateOutlet="navigations"></ng-container>\r\n      </div>\r\n\r\n      <ng-template #navigations>\r\n        <ul class="navbar-nav mx-auto">\r\n          <ng-container\r\n            *ngFor="let route of visibleRoutes$ | async; trackBy: trackByFn"\r\n            [ngTemplateOutlet]="route?.children?.length ? dropdownLink : defaultLink"\r\n            [ngTemplateOutletContext]="{ $implicit: route }"\r\n          >\r\n          </ng-container>\r\n\r\n          <ng-template #defaultLink let-route>\r\n            <li class="nav-item" [abpPermission]="route.requiredPolicy">\r\n              <a class="nav-link" [routerLink]="[route.url]"\r\n                ><i *ngIf="route.iconClass" [ngClass]="route.iconClass"></i> {{ route.name | abpLocalization }}</a\r\n              >\r\n            </li>\r\n          </ng-template>\r\n\r\n          <ng-template #dropdownLink let-route>\r\n            <li\r\n              #navbarRootDropdown\r\n              [abpPermission]="route.requiredPolicy"\r\n              [abpVisibility]="routeContainer"\r\n              class="nav-item dropdown"\r\n              display="static"\r\n              (click)="\r\n                navbarRootDropdown.expand ? (navbarRootDropdown.expand = false) : (navbarRootDropdown.expand = true)\r\n              "\r\n            >\r\n              <a\r\n                class="nav-link dropdown-toggle"\r\n                data-toggle="dropdown"\r\n                aria-haspopup="true"\r\n                aria-expanded="false"\r\n                href="javascript:void(0)"\r\n              >\r\n                <i *ngIf="route.iconClass" [ngClass]="route.iconClass"></i> {{ route.name | abpLocalization }}\r\n              </a>\r\n              <div\r\n                #routeContainer\r\n                class="dropdown-menu border-0 shadow-sm"\r\n                (click)="$event.preventDefault(); $event.stopPropagation()"\r\n                [class.abp-collapsed-height]="smallScreen"\r\n                [class.d-block]="smallScreen"\r\n                [class.abp-mh-25]="smallScreen && navbarRootDropdown.expand"\r\n              >\r\n                <ng-template\r\n                  #forTemplate\r\n                  ngFor\r\n                  [ngForOf]="route.children"\r\n                  [ngForTrackBy]="trackByFn"\r\n                  [ngForTemplate]="childWrapper"\r\n                ></ng-template>\r\n              </div>\r\n            </li>\r\n          </ng-template>\r\n\r\n          <ng-template #childWrapper let-child>\r\n            <ng-template\r\n              [ngTemplateOutlet]="child?.children?.length ? dropdownChild : defaultChild"\r\n              [ngTemplateOutletContext]="{ $implicit: child }"\r\n            ></ng-template>\r\n          </ng-template>\r\n\r\n          <ng-template #defaultChild let-child>\r\n            <div class="dropdown-submenu" [abpPermission]="child.requiredPolicy">\r\n              <a class="dropdown-item" [routerLink]="[child.url]">\r\n                <i *ngIf="child.iconClass" [ngClass]="child.iconClass"></i>\r\n                {{ child.name | abpLocalization }}</a\r\n              >\r\n            </div>\r\n          </ng-template>\r\n\r\n          <ng-template #dropdownChild let-child>\r\n            <div\r\n              [abpVisibility]="childrenContainer"\r\n              class="dropdown-submenu"\r\n              ngbDropdown\r\n              #dropdownSubmenu="ngbDropdown"\r\n              [display]="isDropdownChildDynamic ? \'dynamic\' : \'static\'"\r\n              placement="right-top"\r\n              [autoClose]="true"\r\n              [abpPermission]="child.requiredPolicy"\r\n              (openChange)="openChange($event, childrenContainer)"\r\n            >\r\n              <div ngbDropdownToggle [class.dropdown-toggle]="false">\r\n                <a\r\n                  abpEllipsis="210px"\r\n                  [abpEllipsisEnabled]="isDropdownChildDynamic"\r\n                  role="button"\r\n                  class="btn d-block text-left dropdown-toggle"\r\n                >\r\n                  <i *ngIf="child.iconClass" [ngClass]="child.iconClass"></i>\r\n                  {{ child.name | abpLocalization }}\r\n                </a>\r\n              </div>\r\n              <div\r\n                #childrenContainer\r\n                class="dropdown-menu border-0 shadow-sm"\r\n                [class.abp-collapsed-height]="smallScreen"\r\n                [class.d-block]="smallScreen"\r\n                [class.abp-mh-25]="smallScreen && dropdownSubmenu.isOpen()"\r\n              >\r\n                <ng-template\r\n                  ngFor\r\n                  [ngForOf]="child.children"\r\n                  [ngForTrackBy]="trackByFn"\r\n                  [ngForTemplate]="childWrapper"\r\n                ></ng-template>\r\n              </div>\r\n            </div>\r\n          </ng-template>\r\n        </ul>\r\n\r\n        <ul class="navbar-nav">\r\n          <ng-container\r\n            *ngFor="let element of rightPartElements; trackBy: trackElementByFn"\r\n            [ngTemplateOutlet]="element"\r\n          ></ng-container>\r\n        </ul>\r\n      </ng-template>\r\n    </div>\r\n  </div>\r\n</nav>\r\n\r\n<div [@slideFromBottom]="outlet && outlet.activatedRoute && outlet.activatedRoute.routeConfig.path" class="container">\r\n  <router-outlet #outlet="outlet"></router-outlet>\r\n</div>\r\n\r\n<abp-confirmation></abp-confirmation>\r\n<abp-toast></abp-toast>\r\n\r\n<ng-template #appName>\r\n  {{ appInfo.name }}\r\n</ng-template>\r\n\r\n<ng-template #language>\r\n  <li class="nav-item">\r\n    <div class="dropdown" ngbDropdown #languageDropdown="ngbDropdown" display="static">\r\n      <a\r\n        ngbDropdownToggle\r\n        class="nav-link"\r\n        href="javascript:void(0)"\r\n        role="button"\r\n        id="dropdownMenuLink"\r\n        data-toggle="dropdown"\r\n        aria-haspopup="true"\r\n        aria-expanded="false"\r\n      >\r\n        {{ defaultLanguage$ | async }}\r\n      </a>\r\n      <div\r\n        class="dropdown-menu dropdown-menu-right border-0 shadow-sm"\r\n        aria-labelledby="dropdownMenuLink"\r\n        [class.abp-collapsed-height]="smallScreen"\r\n        [class.d-block]="smallScreen"\r\n        [class.abp-mh-25]="smallScreen && languageDropdown.isOpen()"\r\n      >\r\n        <a\r\n          *ngFor="let lang of dropdownLanguages$ | async"\r\n          href="javascript:void(0)"\r\n          class="dropdown-item"\r\n          (click)="onChangeLang(lang.cultureName)"\r\n          >{{ lang?.displayName }}</a\r\n        >\r\n      </div>\r\n    </div>\r\n  </li>\r\n</ng-template>\r\n\r\n<ng-template #currentUser>\r\n  <li *ngIf="(currentUser$ | async)?.isAuthenticated" class="nav-item">\r\n    <div ngbDropdown class="dropdown" #currentUserDropdown="ngbDropdown" display="static">\r\n      <a\r\n        ngbDropdownToggle\r\n        class="nav-link"\r\n        href="javascript:void(0)"\r\n        role="button"\r\n        id="dropdownMenuLink"\r\n        data-toggle="dropdown"\r\n        aria-haspopup="true"\r\n        aria-expanded="false"\r\n      >\r\n        {{ (currentUser$ | async)?.userName }}\r\n      </a>\r\n      <div\r\n        class="dropdown-menu dropdown-menu-right border-0 shadow-sm"\r\n        aria-labelledby="dropdownMenuLink"\r\n        [class.abp-collapsed-height]="smallScreen"\r\n        [class.d-block]="smallScreen"\r\n        [class.abp-mh-25]="smallScreen && currentUserDropdown.isOpen()"\r\n      >\r\n        <a class="dropdown-item" routerLink="/account/manage-profile">{{\r\n          \'AbpAccount::ManageYourProfile\' | abpLocalization\r\n        }}</a>\r\n        <a class="dropdown-item" href="javascript:void(0)" (click)="logout()">{{\r\n          \'AbpUi::Logout\' | abpLocalization\r\n        }}</a>\r\n      </div>\r\n    </div>\r\n  </li>\r\n</ng-template>\r\n',animations:[r.slideFromBottom,r.collapseWithMargin]}]}],n.ctorParameters=function(){return[{type:i.Store},{type:p.OAuthService},{type:t.Renderer2}]},n.propDecorators={currentUserRef:[{type:t.ViewChild,args:["currentUser",{static:!1,read:t.TemplateRef}]}],languageRef:[{type:t.ViewChild,args:["language",{static:!1,read:t.TemplateRef}]}]},h([i.Select(e.ConfigState.getOne("routes")),b("design:type",d.Observable)],n.prototype,"routes$",void 0),h([i.Select(e.ConfigState.getOne("currentUser")),b("design:type",d.Observable)],n.prototype,"currentUser$",void 0),h([i.Select(e.ConfigState.getDeep("localization.languages")),b("design:type",d.Observable)],n.prototype,"languages$",void 0),h([i.Select(x.getNavigationElements),b("design:type",d.Observable)],n.prototype,"navElements$",void 0),n}();var k=function(){function n(){}return n.type="empty",n.decorators=[{type:t.Component,args:[{selector:"abp-layout-empty",template:"\n    <router-outlet></router-outlet>\n    <abp-confirmation></abp-confirmation>\n    <abp-toast></abp-toast>\n  "}]}],n}();var L=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return function(n,e){function r(){this.constructor=n}m(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,n),Object.defineProperty(e.prototype,"abpErrors",{get:function(){return this.errors&&this.errors.length?this.errors.map((function(n){if(!n.message)return n;var e=n.message.indexOf("[");return e>-1?f({},n,{message:n.message.slice(0,e),interpoliteParams:n.message.slice(e+1,n.message.length-1).split(",")}):n})):[]},enumerable:!0,configurable:!0}),e.decorators=[{type:t.Component,args:[{selector:"abp-validation-error",template:'\n    <div class="invalid-feedback" *ngFor="let error of abpErrors; trackBy: trackByFn">\n      {{ error.message | abpLocalization: error.interpoliteParams }}\n    </div>\n  ',changeDetection:t.ChangeDetectionStrategy.OnPush,encapsulation:t.ViewEncapsulation.None}]}],e}(o.ValidationErrorComponent),A=function(){function n(n){this.lazyLoadService=n,this.appendStyle().subscribe()}return n.prototype.appendStyle=function(){return this.lazyLoadService.load(null,"style","\n.content-header-title {\n    font-size: 24px;\n}\n\n.entry-row {\n    margin-bottom: 15px;\n}\n\n#main-navbar-tools a.dropdown-toggle {\n    text-decoration: none;\n    color: #fff;\n}\n\n.navbar .dropdown-submenu {\n    position: relative;\n}\n.navbar .dropdown-menu {\n    margin: 0;\n    padding: 0;\n}\n    .navbar .dropdown-menu a {\n        font-size: .9em;\n        padding: 10px 15px;\n        display: block;\n        min-width: 210px;\n        text-align: left;\n        border-radius: 0.25rem;\n        min-height: 44px;\n    }\n.navbar .dropdown-submenu a::after {\n    transform: rotate(-90deg);\n    position: absolute;\n    right: 16px;\n    top: 18px;\n}\n.navbar .dropdown-submenu .dropdown-menu {\n    top: 0;\n    left: 100%;\n}\n\n.card-header .btn {\n    padding: 2px 6px;\n}\n.card-header h5 {\n    margin: 0;\n}\n.container > .card {\n    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075) !important;\n}\n\n@media screen and (min-width: 768px) {\n    .navbar .dropdown:hover > .dropdown-menu {\n        display: block;\n    }\n\n    .navbar .dropdown-submenu:hover > .dropdown-menu {\n        display: block;\n    }\n}\n.input-validation-error {\n    border-color: #dc3545;\n}\n.field-validation-error {\n    font-size: 0.8em;\n}\n","head","afterbegin")},n.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],n.ctorParameters=function(){return[{type:e.LazyLoadService}]},n.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new n(t.ɵɵinject(e.LazyLoadService))},token:n,providedIn:"root"}),n}();var j,D=[O,w,k],P=function(){function n(n){this.initialService=n}return n.decorators=[{type:t.NgModule,args:[{declarations:v(D,[L]),imports:[e.CoreModule,r.ThemeSharedModule,a.NgbCollapseModule,a.NgbDropdownModule,l.ToastModule,o.NgxValidateCoreModule,i.NgxsModule.forFeature([x]),o.NgxValidateCoreModule.forRoot({targetSelector:".form-group",blueprints:{email:"AbpAccount::ThisFieldIsNotAValidEmailAddress.",max:"AbpAccount::ThisFieldMustBeBetween{0}And{1}[{{ min }},{{ max }}]",maxlength:"AbpAccount::ThisFieldMustBeAStringOrArrayTypeWithAMaximumLengthoOf{0}[{{ requiredLength }}]",min:"AbpAccount::ThisFieldMustBeBetween{0}And{1}[{{ min }},{{ max }}]",minlength:"AbpAccount::ThisFieldMustBeAStringOrArrayTypeWithAMinimumLengthOf{0}[{{ requiredLength }}]",required:"AbpAccount::ThisFieldIsRequired.",passwordMismatch:"AbpIdentity::Identity.PasswordConfirmationFailed"},errorTemplate:L})],exports:v(D),entryComponents:v(D,[L])}]}],n.ctorParameters=function(){return[{type:A}]},n}();(function(n){function e(){}function r(){}n.State=e,n.NavigationElement=r})(j||(j={})),n.AccountLayoutComponent=w,n.AddNavigationElement=C,n.ApplicationLayoutComponent=O,n.EmptyLayoutComponent=k,n.LAYOUTS=D,n.LayoutState=x,n.RemoveNavigationElementByName=S,n.ThemeBasicModule=P,n.ValidationErrorComponent=L,n.ɵa=O,n.ɵb=x,n.ɵc=w,n.ɵd=k,n.ɵe=L,n.ɵf=x,n.ɵg=C,n.ɵh=S,n.ɵj=A,Object.defineProperty(n,"__esModule",{value:!0})}));
//# sourceMappingURL=abp-ng.theme.basic.umd.min.js.map
