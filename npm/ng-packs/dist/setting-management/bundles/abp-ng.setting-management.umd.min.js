!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@abp/ng.core"),require("@abp/ng.theme.shared"),require("@angular/core"),require("@angular/router"),require("@ngxs/router-plugin"),require("@ngxs/store"),require("rxjs"),require("angular-oauth2-oidc"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@abp/ng.setting-management",["exports","@abp/ng.core","@abp/ng.theme.shared","@angular/core","@angular/router","@ngxs/router-plugin","@ngxs/store","rxjs","angular-oauth2-oidc","rxjs/operators"],t):t(((e=e||self).abp=e.abp||{},e.abp.ng=e.abp.ng||{},e.abp.ng["setting-management"]={}),e.ng_core,e.ng_theme_shared,e.ng.core,e.ng.router,e.routerPlugin,e.store,e.rxjs,e.angularOauth2Oidc,e.rxjs.operators)}(this,function(e,t,n,r,i,s,o,a,c,u){"use strict";var d=function(){function e(e,n,r,i){var s=this;this.actions=e,this.router=n,this.store=r,this.oAuthService=i,this.settings=[],this.selected={},this.destroy$=new a.Subject,setTimeout(function(){return s.setSettings()},0),this.actions.pipe(o.ofActionSuccessful(t.GetAppConfiguration)).pipe(u.takeUntil(this.destroy$)).subscribe(function(){s.oAuthService.hasValidAccessToken()&&s.setSettings()})}return e.prototype.ngOnDestroy=function(){this.destroy$.next()},e.prototype.setSettings=function(){var e=this,n=this.router.config.find(function(e){return"setting-management"===e.path});this.settings=n.data.settings.filter(function(n){return e.store.selectSnapshot(t.ConfigState.getGrantedPolicy(n.requiredPolicy))}).sort(function(e,t){return e.order-t.order}),this.checkSelected()},e.prototype.checkSelected=function(){var e=this;this.selected=this.settings.find(function(t){return t.url===e.router.url})||{},!this.selected.name&&this.settings.length&&this.setSelected(this.settings[0])},e.prototype.setSelected=function(e){this.selected=e,this.store.dispatch(new s.Navigate([e.url]))},e.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:o.Actions},{type:i.Router},{type:o.Store},{type:c.OAuthService}]},e.ngInjectableDef=r.ɵɵdefineInjectable({factory:function(){return new e(r.ɵɵinject(o.Actions),r.ɵɵinject(i.Router),r.ɵɵinject(o.Store),r.ɵɵinject(c.OAuthService))},token:e,providedIn:"root"}),e}();var l=function(){function e(e,t){this.settingManagementService=e,this.router=t,this.trackByFn=function(e,t){return t.name},e.selected&&this.router.url!==e.selected.url&&e.settings.length&&e.setSelected(e.settings[0])}return e.prototype.ngOnDestroy=function(){},e.type="setting",e.decorators=[{type:r.Component,args:[{selector:"abp-setting-layout",template:'<div class="row entry-row">\n  <div class="col-auto">\n    <h1 class="content-header-title">{{ \'AbpSettingManagement::Settings\' | abpLocalization }}</h1>\n  </div>\n  \x3c!-- <div id="breadcrumb" class="col-md-auto pl-md-0">\n    <abp-breadcrumb></abp-breadcrumb>\n  </div> --\x3e\n  <div class="col">\n    <div class="text-lg-right pt-2" id="AbpContentToolbar"></div>\n  </div>\n</div>\n\n<div id="SettingManagementWrapper">\n  <div class="card">\n    <div class="card-body">\n      <div *ngIf="!settingManagementService.settings.length" class="text-center">\n        <i class="fa fa-spinner fa-spin"></i>\n      </div>\n      <div class="row">\n        <div class="col-3">\n          <ul class="nav flex-column nav-pills" id="nav-tab" role="tablist">\n            <li\n              *abpFor="\n                let setting of settingManagementService.settings;\n                trackBy: trackByFn;\n                orderBy: \'order\';\n                orderDir: \'ASC\'\n              "\n              (click)="settingManagementService.setSelected(setting)"\n              class="nav-item"\n              [abpPermission]="setting.requiredPolicy"\n            >\n              <a\n                class="nav-link"\n                [id]="setting.name + \'-tab\'"\n                role="tab"\n                [class.active]="setting.name === settingManagementService.selected.name"\n                >{{ setting.name | abpLocalization }}</a\n              >\n            </li>\n          </ul>\n        </div>\n        <div class="col-9">\n          <div *ngIf="settingManagementService.settings.length" class="tab-content">\n            <div\n              class="tab-pane fade show active"\n              [id]="settingManagementService.selected.name + \'-tab\'"\n              role="tabpanel"\n            >\n              <router-outlet></router-outlet>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'}]}],e.ctorParameters=function(){return[{type:d},{type:i.Router}]},e}();var g={routes:[{name:"Settings",path:"setting-management",parentName:"AbpUiNavigation::Menu:Administration",layout:"application",order:6,iconClass:"fa fa-cog"}]},p={routes:g,settings:[]},h=[{path:"setting-management",component:t.DynamicLayoutComponent,children:[{path:"",component:l}],data:p}],f=function(){function e(){}return e.decorators=[{type:r.NgModule,args:[{imports:[i.RouterModule.forChild(h)],exports:[i.RouterModule]}]}],e}(),m=l,v=function(){function e(){}return e.decorators=[{type:r.NgModule,args:[{declarations:[m],imports:[f,t.CoreModule,n.ThemeSharedModule],entryComponents:[m]}]}],e}();e.SETTING_LAYOUT=m,e.SETTING_MANAGEMENT_ROUTES=g,e.SettingLayoutComponent=l,e.SettingManagementModule=v,e.ɵa=d,e.ɵb=f,e.ɵc=g,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=abp-ng.setting-management.umd.min.js.map