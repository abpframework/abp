{"version":3,"file":"abp-ng.setting-management.js","sources":["ng://@abp/ng.setting-management/lib/actions/setting-management.actions.ts","ng://@abp/ng.setting-management/lib/states/setting-management.state.ts","ng://@abp/ng.setting-management/lib/components/setting-management.component.ts","ng://@abp/ng.setting-management/lib/setting-management-routing.module.ts","ng://@abp/ng.setting-management/lib/setting-management.module.ts"],"sourcesContent":["import { SettingTab } from '@abp/ng.theme.shared';\n\nexport class SetSelectedSettingTab {\n  static readonly type = '[SettingManagement] Set Selected Tab';\n  constructor(public payload: SettingTab) {}\n}\n","import { Action, Selector, State, StateContext } from '@ngxs/store';\nimport { SetSelectedSettingTab } from '../actions/setting-management.actions';\nimport { SettingManagement } from '../models/setting-management';\n\n@State<SettingManagement.State>({\n  name: 'SettingManagementState',\n  defaults: { selectedTab: {} } as SettingManagement.State,\n})\nexport class SettingManagementState {\n  @Selector()\n  static getSelectedTab({ selectedTab }: SettingManagement.State) {\n    return selectedTab;\n  }\n\n  @Action(SetSelectedSettingTab)\n  settingManagementAction({ patchState }: StateContext<SettingManagement.State>, { payload }: SetSelectedSettingTab) {\n    patchState({\n      selectedTab: payload,\n    });\n  }\n}\n","import { Component, TrackByFunction, OnInit } from '@angular/core';\nimport { SettingTab, getSettingTabs } from '@abp/ng.theme.shared';\nimport { Router } from '@angular/router';\nimport { Store } from '@ngxs/store';\nimport { ConfigState } from '@abp/ng.core';\nimport { SettingManagementState } from '../states/setting-management.state';\nimport { SetSelectedSettingTab } from '../actions/setting-management.actions';\nimport { RouterState } from '@ngxs/router-plugin';\n\n@Component({\n  selector: 'abp-setting-management',\n  templateUrl: './setting-management.component.html',\n})\nexport class SettingManagementComponent implements OnInit {\n  settings: SettingTab[] = [];\n\n  set selected(value: SettingTab) {\n    this.store.dispatch(new SetSelectedSettingTab(value));\n  }\n  get selected(): SettingTab {\n    const value = this.store.selectSnapshot(SettingManagementState.getSelectedTab);\n\n    if ((!value || !value.component) && this.settings.length) {\n      return this.settings[0];\n    }\n\n    return value;\n  }\n\n  trackByFn: TrackByFunction<SettingTab> = (_, item) => item.name;\n\n  constructor(private router: Router, private store: Store) {}\n\n  ngOnInit() {\n    this.settings = getSettingTabs()\n      .filter(setting => this.store.selectSnapshot(ConfigState.getGrantedPolicy(setting.requiredPolicy)))\n      .sort((a, b) => a.order - b.order);\n\n    if (!this.selected && this.settings.length) {\n      this.selected = this.settings[0];\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { SettingManagementComponent } from './components/setting-management.component';\nimport { DynamicLayoutComponent } from '@abp/ng.core';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DynamicLayoutComponent,\n    children: [{ path: '', component: SettingManagementComponent }],\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SettingManagementRoutingModule {}\n","import { CoreModule } from '@abp/ng.core';\nimport { ThemeSharedModule } from '@abp/ng.theme.shared';\nimport { NgModule } from '@angular/core';\nimport { SettingManagementRoutingModule } from './setting-management-routing.module';\nimport { SettingManagementComponent } from './components/setting-management.component';\nimport { NgxsModule } from '@ngxs/store';\nimport { SettingManagementState } from './states/setting-management.state';\n\n@NgModule({\n  declarations: [SettingManagementComponent],\n  imports: [\n    SettingManagementRoutingModule,\n    CoreModule,\n    ThemeSharedModule,\n    NgxsModule.forFeature([SettingManagementState]),\n  ],\n})\nexport class SettingManagementModule {}\n"],"names":["tslib_1.__decorate"],"mappings":"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"}